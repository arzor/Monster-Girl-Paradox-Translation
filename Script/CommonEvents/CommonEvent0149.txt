// EVENT 0149
Name "Reaper: Reset Time"

355("ex_choice_add(\"New Game+\",1)")
655("ex_choice_add(\"Reset Collab Scenario\",2,")
655("\"v[1212]>7\",0)")
655("ex_choice_add(\"Reset Loop Incident\",3,")
655("\"v[1122]==7\",0)")
655("ex_choice_add(\"Re-experience the Night Festival\",4,")
655("\"v[1122]==7\",0)")
655("ex_choice_add(\"Never mind\",5)")
355("ex_choice_show(0,11,[0,0])")
If(1,9,0,1,0)
 ShowMessageFace("sinigami_fc1",0,0,2,1)
 ShowMessage("\\n<Reaper>You wish to begin life anew? You will keep your current powers and start at the beginning of the adventure.")
 ShowMessageFace("sinigami_fc1",0,0,2,2)
 ShowMessage("\\n<Reaper>Your companions will retain their powers and rejoin you in the next world.")
 If(0,4,0)
  ShowMessageFace("sinigami_fc1",0,0,2,3)
  ShowMessage("\\n<Reaper>However, you should remove anything valuable from Alice. She will not necessarily become your companion in the next life.")
  0()
 EndIf()
 If(0,5,0)
  ShowMessageFace("sinigami_fc1",0,0,2,4)
  ShowMessage("\\n<Reaper>However, you should remove anything valuable from Ilias. She will not necessarily become your companion in the next life.")
  0()
 EndIf()
 ShowMessageFace("sinigami_fc1",0,0,2,5)
 ShowMessage("\\n<Reaper>Are you prepared to begin anew?")
 ShowChoices(strings("No","Yes"),0)
 IfPlayerPicksChoice(0,null)
  ShowMessageFace("sinigami_fc1",0,0,2,6)
  ShowMessage("\\n<Reaper>No? Off with you then.")
  PictureMove(5,null,0,0,0,0,100,100,0,0,30,true)
  PictureClear(5)
  EndEventProcessing()
  0()
 IfPlayerPicksChoice(1,null)
  0()
 404()
 ShowMessageFace("sinigami_fc1",0,0,2,7)
 ShowMessage("\\n<Reaper>I'll ask you once more. Do you truly wish to be reborn and start anew?")
 ShowChoices(strings("No","Yes"),0)
 IfPlayerPicksChoice(0,null)
  ShowMessageFace("sinigami_fc1",0,0,2,8)
  ShowMessage("\\n<Reaper>No? Off with you then.")
  PictureMove(5,null,0,0,0,0,100,100,0,0,30,true)
  PictureClear(5)
  EndEventProcessing()
  0()
 IfPlayerPicksChoice(1,null)
  0()
 404()
 ShowMessageFace("sinigami_fc1",0,0,2,9)
 ShowMessage("\\n<Reaper>Very well... Then go to the next world.")
 221()
 PictureClear(5)
 242(2)
 Wait(60)
 314(0,0)
 ChangeVariable(901,901,1,0,1)
 ChangeVariable(909,909,1,0,1)
 ChangeSwitch(4,24,1)
 ChangeSwitch(26,55,1)
 ChangeSwitch(57,89,1)
 ChangeSwitch(94,200,1)
 ChangeSwitch(601,701,1)
 ChangeSwitch(2901,2999,1)
 ChangeSwitch(1005,1005,1)
 ChangePartyMember(5,1,0)
 ChangeSwitch(1026,1026,1)
 ChangePartyMember(26,1,0)
 ChangeSwitch(1053,1053,1)
 ChangePartyMember(53,1,0)
 ChangeSwitch(1525,1525,1)
 ChangePartyMember(525,1,0)
 ChangeSwitch(2001,3000,1)
 ChangeSwitch(4001,5000,1)
 ChangeVariable(6,40,0,0,0)
 ChangeVariable(801,900,0,0,0)
 ChangeVariable(907,907,0,0,0)
 ChangeVariable(1003,1007,0,0,0)
 ChangeVariable(1009,2000,0,0,0)
 ChangeInventory_Item(501,1,0,1)
 ChangeInventory_Item(502,1,0,1)
 ChangeInventory_Item(503,1,0,1)
 ChangeInventory_Item(504,1,0,1)
 ChangeInventory_Item(505,1,0,1)
 ChangeInventory_Item(506,1,0,1)
 ChangeInventory_Item(508,1,0,1)
 ChangeInventory_Item(510,1,0,1)
 ChangeInventory_Item(511,1,0,1)
 ChangeInventory_Item(512,1,0,1)
 ChangeInventory_Item(513,1,0,1)
 ChangeInventory_Item(514,1,0,1)
 ChangeInventory_Item(515,1,0,1)
 ChangeInventory_Item(516,1,0,1)
 ChangeInventory_Item(518,1,0,1)
 ChangeInventory_Item(519,1,0,1)
 ChangeInventory_Item(520,1,0,1)
 ChangeInventory_Item(522,1,0,1)
 ChangeInventory_Item(523,1,0,1)
 ChangeInventory_Item(528,1,0,1)
 ChangeInventory_Item(529,1,0,1)
 ChangeInventory_Item(530,1,0,1)
 ChangeInventory_Item(531,1,0,1)
 ChangeInventory_Item(533,1,0,1)
 ChangeInventory_Item(534,1,0,1)
 ChangeInventory_Item(535,1,0,1)
 ChangeInventory_Item(536,1,0,1)
 ChangeInventory_Item(537,1,0,1)
 ChangeInventory_Item(538,1,0,1)
 ChangeInventory_Item(539,1,0,1)
 ChangeInventory_Item(540,1,0,1)
 ChangeInventory_Item(541,1,0,1)
 ChangeInventory_Item(542,1,0,1)
 ChangeInventory_Item(543,1,0,1)
 ChangeInventory_Item(546,1,0,1)
 ChangeInventory_Item(547,1,0,1)
 ChangeInventory_Item(555,1,0,1)
 ChangeInventory_Item(556,1,0,1)
 ChangeInventory_Item(557,1,0,1)
 ChangeInventory_Item(595,1,0,1)
 ChangeInventory_Item(596,1,0,1)
 355("$game_self_switches = Game_SelfSwitches.new")
 655("$game_map.need_refresh = true")
 211(0)
 355("move_stand_actors_except_luca")
 TeleportPlayer(0,545,0,1,0,2)
 222()
 EndEventProcessing()
 0()
EndIf()
If(1,9,0,1,0)
 ShowMessageFace("sinigami_fc1",0,0,2,10)
 ShowMessage("\\n<Reaper>You wish to begin life anew? You will keep your current powers and start at the beginning of the adventure.")
 If(0,4,0)
  ShowMessageFace("sinigami_fc1",0,0,2,11)
  ShowMessage("\\n<Reaper>However, you should remove anything valuable from Alice. She will not necessarily become your companion in the next life.")
  0()
 EndIf()
 If(0,5,0)
  ShowMessageFace("sinigami_fc1",0,0,2,12)
  ShowMessage("\\n<Reaper>However, you should remove anything valuable from Ilias. She will not necessarily become your companion in the next life.")
  0()
 EndIf()
 ShowMessageFace("sinigami_fc1",0,0,2,13)
 ShowMessage("\\n<Reaper>Are you prepared to begin anew?")
 ShowChoices(strings("No","Yes"),0)
 IfPlayerPicksChoice(0,null)
  ShowMessageFace("sinigami_fc1",0,0,2,14)
  ShowMessage("\\n<Reaper>No? Off with you then.")
  PictureMove(5,null,0,0,0,0,100,100,0,0,30,true)
  PictureClear(5)
  EndEventProcessing()
  0()
 IfPlayerPicksChoice(1,null)
  0()
 404()
 ShowMessageFace("sinigami_fc1",0,0,2,15)
 ShowMessage("\\n<Reaper>I'll ask you once more. Do you truly wish to be reborn and start anew?")
 ShowChoices(strings("No","Yes"),0)
 IfPlayerPicksChoice(0,null)
  ShowMessageFace("sinigami_fc1",0,0,2,16)
  ShowMessage("\\n<Reaper>No? Off with you then.")
  PictureMove(5,null,0,0,0,0,100,100,0,0,30,true)
  PictureClear(5)
  EndEventProcessing()
  0()
 IfPlayerPicksChoice(1,null)
  0()
 404()
 ShowMessageFace("sinigami_fc1",0,0,2,17)
 ShowMessage("\\n<Reaper>Very well... Then go to the next world.")
 221()
 PictureClear(5)
 242(2)
 Wait(60)
 314(0,0)
 ChangeVariable(901,901,1,0,1)
 ChangeVariable(909,909,1,0,1)
 ChangeSwitch(4,24,1)
 ChangeSwitch(26,55,1)
 ChangeSwitch(57,89,1)
 ChangeSwitch(93,200,1)
 ChangeSwitch(601,701,1)
 ChangeSwitch(2901,2999,1)
 ChangeSwitch(1005,1005,1)
 ChangePartyMember(5,1,0)
 ChangeSwitch(1026,1026,1)
 ChangePartyMember(26,1,0)
 ChangeSwitch(1053,1053,1)
 ChangePartyMember(53,1,0)
 ChangeSwitch(1525,1525,1)
 ChangePartyMember(525,1,0)
 ChangeSwitch(2001,3000,1)
 ChangeSwitch(4001,5000,1)
 ChangeVariable(6,40,0,0,0)
 ChangeVariable(801,900,0,0,0)
 ChangeVariable(907,907,0,0,0)
 ChangeVariable(1003,1007,0,0,0)
 ChangeVariable(1009,2000,0,0,0)
 ChangeInventory_Item(501,1,0,1)
 ChangeInventory_Item(502,1,0,1)
 ChangeInventory_Item(503,1,0,1)
 ChangeInventory_Item(504,1,0,1)
 ChangeInventory_Item(505,1,0,1)
 ChangeInventory_Item(506,1,0,1)
 ChangeInventory_Item(508,1,0,1)
 ChangeInventory_Item(510,1,0,1)
 ChangeInventory_Item(511,1,0,1)
 ChangeInventory_Item(512,1,0,1)
 ChangeInventory_Item(513,1,0,1)
 ChangeInventory_Item(514,1,0,1)
 ChangeInventory_Item(515,1,0,1)
 ChangeInventory_Item(516,1,0,1)
 ChangeInventory_Item(518,1,0,1)
 ChangeInventory_Item(519,1,0,1)
 ChangeInventory_Item(520,1,0,1)
 ChangeInventory_Item(522,1,0,1)
 ChangeInventory_Item(523,1,0,1)
 ChangeInventory_Item(528,1,0,1)
 ChangeInventory_Item(529,1,0,1)
 ChangeInventory_Item(530,1,0,1)
 ChangeInventory_Item(531,1,0,1)
 ChangeInventory_Item(533,1,0,1)
 ChangeInventory_Item(534,1,0,1)
 ChangeInventory_Item(535,1,0,1)
 ChangeInventory_Item(536,1,0,1)
 ChangeInventory_Item(537,1,0,1)
 ChangeInventory_Item(538,1,0,1)
 ChangeInventory_Item(539,1,0,1)
 ChangeInventory_Item(540,1,0,1)
 ChangeInventory_Item(541,1,0,1)
 ChangeInventory_Item(542,1,0,1)
 ChangeInventory_Item(543,1,0,1)
 ChangeInventory_Item(546,1,0,1)
 ChangeInventory_Item(547,1,0,1)
 ChangeInventory_Item(555,1,0,1)
 ChangeInventory_Item(556,1,0,1)
 ChangeInventory_Item(557,1,0,1)
 ChangeInventory_Item(595,1,0,1)
 ChangeInventory_Item(596,1,0,1)
 355("$game_self_switches = Game_SelfSwitches.new")
 655("$game_map.need_refresh = true")
 211(0)
 355("move_stand_actors_except_luca")
 TeleportPlayer(0,545,0,1,0,2)
 222()
 EndEventProcessing()
 0()
EndIf()
If(1,9,0,2,0)
 ShowMessageFace("sinigami_fc1",0,0,2,18)
 ShowMessage("\\n<Reaper>Should you reset the collaboration scenario...\nYou will be able to play through the scenario again from the beginning.")
 ShowMessageFace("sinigami_fc1",0,0,2,19)
 ShowMessage("\\n<Reaper>However, any guest characters you have recruited will be removed from your party. Now, do you want to reset the collaboration scenario?")
 ShowChoices(strings("Don't reset","Reset"),1)
 IfPlayerPicksChoice(0,null)
  PictureClear(5)
  EndEventProcessing()
  0()
 IfPlayerPicksChoice(1,null)
  ShowMessageFace("sinigami_fc1",0,0,2,20)
  ShowMessage("\\n<Reaper>I will ask once more...\nDo you really want to reset the collaboration scenario?")
  ShowChoices(strings("Don't reset","Reset"),1)
  IfPlayerPicksChoice(0,null)
   PictureClear(5)
   EndEventProcessing()
   0()
  IfPlayerPicksChoice(1,null)
   Wait(60)
   ChangeVariable(1201,1218,0,0,0)
   ChangeVariable(1221,1229,0,0,0)
   ChangeSwitch(2901,2962,1)
   ChangeSwitch(1801,1828,1)
   ChangeSwitch(1832,1832,1)
   355("reset_selfswitch_map(845,847,848,850,851,852,")
   655("853,854,855,858,859,860,861,866,867,868,869,870,")
   655("871,872,873,874,875,876,877,878,879,880,881,882,")
   655("883,884,885,886,887,888,889,890,891,892,893,894,")
   655("895,896,897,898,899,900,901,902,903,904,905,906,")
   655("907,908,909,910,911,912,913,914,915,916,917,918,")
   655("919,920,921,922,923,924,925,926,927,928,929,930,")
   655("931,932,933,934,935,936,949,953)")
   ChangeInventory_Item(595,1,0,1)
   ChangeInventory_Item(596,1,0,1)
   355("delete_actor_ex(801)")
   655("delete_actor_ex(802)")
   655("delete_actor_ex(803)")
   655("delete_actor_ex(804)")
   655("delete_actor_ex(805)")
   655("delete_actor_ex(806)")
   655("delete_actor_ex(807)")
   655("delete_actor_ex(808)")
   655("delete_actor_ex(809)")
   655("delete_actor_ex(810)")
   355("delete_actor_ex(811)")
   655("delete_actor_ex(812)")
   655("delete_actor_ex(813)")
   655("delete_actor_ex(814)")
   655("delete_actor_ex(815)")
   655("delete_actor_ex(816)")
   655("delete_actor_ex(817)")
   655("delete_actor_ex(818)")
   655("delete_actor_ex(819)")
   655("delete_actor_ex(820)")
   355("delete_actor_ex(821)")
   655("delete_actor_ex(822)")
   655("delete_actor_ex(823)")
   655("delete_actor_ex(824)")
   655("delete_actor_ex(825)")
   655("delete_actor_ex(826)")
   655("delete_actor_ex(827)")
   655("delete_actor_ex(828)")
   ShowMessageFace("sinigami_fc1",0,0,2,21)
   ShowMessage("\\n<Reaper>...The collaboration scenario has been reset.\nOff with you now.")
   PictureClear(5)
   EndEventProcessing()
   0()
  404()
  0()
 404()
 0()
EndIf()
If(1,9,0,3,0)
 ShowMessageFace("sinigami_fc1",0,0,2,22)
 ShowMessage("\\n<Reaper>Should you reset the loop incident... You will be able to play through the time loop scenario again from the beginning.")
 ShowMessageFace("sinigami_fc1",0,0,2,23)
 ShowMessage("\\n<Reaper>However, any progress of events related to it will be reset back to its initial state. Now, do you want to reset the time loop scenario?")
 ShowChoices(strings("Don't reset","Reset"),1)
 IfPlayerPicksChoice(0,null)
  PictureClear(5)
  EndEventProcessing()
  0()
 IfPlayerPicksChoice(1,null)
  ShowMessageFace("sinigami_fc1",0,0,2,24)
  ShowMessage("\\n<Reaper>I will ask once more...\nDo you really want to reset the time loop scenario?")
  ShowChoices(strings("Don't reset","Reset"),1)
  IfPlayerPicksChoice(0,null)
   PictureClear(5)
   EndEventProcessing()
   0()
  IfPlayerPicksChoice(1,null)
   Wait(60)
   ChangeVariable(1098,1122,0,0,0)
   ChangeSwitch(2337,2433,1)
   ShowMessageFace("sinigami_fc1",0,0,2,25)
   ShowMessage("\\n<Reaper>...You can now play the loop scenario from the begining again. Off with you now.")
   PictureClear(5)
   EndEventProcessing()
   0()
  404()
  0()
 404()
 0()
EndIf()
If(1,9,0,4,0)
 ShowMessageFace("sinigami_fc1",0,0,2,26)
 ShowMessage("\\n<Reaper>Do you want to relive the Night Festival?\nYou must really like festivals...")
 ShowMessageFace("sinigami_fc1",0,0,2,27)
 ShowMessage("\\n<Reaper>If that's all you want, it shouldn't affect space-time too much. Now, would you like to go back to right before the Night Festival?")
 ShowChoices(strings("Don't re-experience","Re-experience"),1)
 IfPlayerPicksChoice(0,null)
  PictureClear(5)
  EndEventProcessing()
  0()
 IfPlayerPicksChoice(1,null)
  221()
  PictureClear(5)
  Wait(180)
  TeleportPlayer(0,954,41,1,2,2)
  ChangeVariable(1122,1122,0,0,6)
  ChangeSwitch(31,31,1)
  ChangeSwitch(32,32,1)
  ChangeSwitch(33,33,1)
  ChangeSwitch(94,94,0)
  ChangeSwitch(100,100,0)
  ChangeSwitch(2433,2433,1)
  355("set_temp_actors(1)")
  222()
  RunCommonEvent(581)
  EndEventProcessing()
  0()
 404()
 0()
EndIf()
PictureClear(5)
EndEventProcessing()
0()
